<?xml version="1.0" encoding="UTF-8" ?>
<config xmlns:xi="http://www.w3.org/2001/XInclude"> 
	<luceneMatchVersion>6.2.1</luceneMatchVersion>
	<dataDir>${solr.data.dir:/var/data/solr/}/${solr.core.name}/data</dataDir>
	<directoryFactory name="DirectoryFactory" class="${solr.directoryFactory:solr.NRTCachingDirectoryFactory}" />
	<codecFactory class="solr.SchemaCodecFactory" /> 
	<schemaFactory class="ClassicIndexSchemaFactory" />
	<indexConfig>
		<lockType>${solr.lock.type:native}</lockType>
	</indexConfig>
	<jmx />
	<updateHandler class="solr.DirectUpdateHandler2"/>		
	<query>
		<maxBooleanClauses>1024</maxBooleanClauses>
		<filterCache class="solr.FastLRUCache" size="512" initialSize="512" autowarmCount="0" />
		<queryResultCache class="solr.LRUCache" size="512" initialSize="512" autowarmCount="0" />
		<documentCache class="solr.LRUCache" size="512" initialSize="512" autowarmCount="0" />
		<enableLazyFieldLoading>true</enableLazyFieldLoading>
		<queryResultWindowSize>20</queryResultWindowSize>
		<queryResultMaxDocsCached>200</queryResultMaxDocsCached>
		<useColdSearcher>false</useColdSearcher>
		<maxWarmingSearchers>2</maxWarmingSearchers>
	</query>  	
	<requestDispatcher handleSelect="true">
		<requestParsers 
			enableRemoteStreaming="true" 
			multipartUploadLimitInKB="2048000" 
			formdataUploadLimitInKB="2048" />
		<httpCaching never304="true" />
	</requestDispatcher>	

	<!-- Request Handler #1: eDisMax on title with a rigid mm -->
	<requestHandler name="/rh1" class="solr.SearchHandler">
		<lst name="defaults">
			<str name="fl">id, [explain]</str>
			<int name="rows">10</int>
			<str name="defType">edismax</str>
			<str name="mm">100%</str>
			<str name="qf">title</str>
		</lst>
	</requestHandler>

	<!-- Request Handler #2: eDisMax on title with just one mandatory clause -->
	<requestHandler name="/rh2" class="solr.SearchHandler">
		<lst name="defaults">
			<str name="fl">title, [explain]</str>
			<str name="defType">edismax</str>
			<str name="mm">1</str>
			<str name="qf">title</str>
		</lst>
	</requestHandler>
	
	<!-- Request Handler #3: eDisMax on author name with maximum mm -->
	<requestHandler name="/rh3" class="solr.SearchHandler">
		<lst name="defaults">
			<str name="defType">edismax</str>
			<str name="fl">author,[explain]</str>
			<str name="qf">author</str>
			<str name="mm">100%</str>
			<str name="tie">0.01</str>
		</lst>
		<lst name="invariants">
		</lst>
	</requestHandler>	
	
	<requestHandler name="/search" class="org.gx.labs.crh.FacadeRequestHandler" default="true">
		<str name="chain">/rh1,/rh2,/rh3</str>
	</requestHandler>
  	
	<admin>
		<defaultQuery>Gx</defaultQuery>
	</admin>
</config>